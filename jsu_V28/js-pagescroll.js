﻿var NSMv=NSMv||{};NSMv.site=NSMv.site||{};
(function(b){var e=document.location;b.ScrollConfig=function(){return{Show:!1,PageNext:2,PageScroll:!0,cssSel_ScrollElement:".general-list .app-list:last-of-type .app-download:last-child",cssSel_AppendElement:".general-list",cssLoadDiv:"pageloader",JSonParams:"",JsonPage:e.protocol+"//"+e.host+e.pathname}};b.ArrConfigs=[new b.ScrollConfig];b.element_in_scroll=function(a){if((a=document.querySelector(a))&&a.getBoundingClientRect().top-document.body.getBoundingClientRect().top+a.getBoundingClientRect().height<=
window.scrollY+window.innerHeight)return!0};b.doScrollCheck=function(a){var c=a.JSonParams;if(a.PageScroll&&b.element_in_scroll(a.cssSel_ScrollElement)&&!a.Show){a.Show=!0;document.querySelector(a.cssSel_AppendElement).insertAdjacentHTML("beforeend",'<div class="'+a.cssLoadDiv+'"></div>');c&&(c="&"+c);var d=new XMLHttpRequest;d.open("GET",a.JsonPage+"?page="+a.PageNext+c,!0);d.onload=function(){if(200<=d.status&&400>d.status){var b=JSON.parse(d.responseText);document.querySelector(a.cssSel_AppendElement).insertAdjacentHTML("beforeend",
b.Content);a.PageNext++;document.querySelector("."+a.cssLoadDiv).remove();b.MaxPage<a.PageNext&&(a.PageScroll=!1);a.Show=!1}};d.send()}};window.addEventListener("scroll",function(a){if(b.ArrConfigs.length)for(a=0;a<b.ArrConfigs.length;a++)if(b.ArrConfigs[a].PageScroll&&!b.ArrConfigs[a].Show){var c=document.querySelector(b.ArrConfigs[a].cssSel_AppendElement);c&&"none"!==c.style.display&&b.doScrollCheck(b.ArrConfigs[a])}})})(NSMv.site);
